

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Principles of software engineering &#8212; Better Code, Better Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'software_engineering';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Bibliography" href="bibliography.html" />
    <link rel="prev" title="Essential tools and techniques" href="essential_tools_and_techniques.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="frontmatter.html">
  
  
  
  
  
  
    <p class="title logo__title">Better Code, Better Science</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="frontmatter.html">
                    Better Code, Better Science
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="essential_tools_and_techniques.html">Essential tools and techniques</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Principles of software engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/poldrack/BetterCodeBetterScience" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/poldrack/BetterCodeBetterScience/issues/new?title=Issue%20on%20page%20%2Fsoftware_engineering.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/software_engineering.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Principles of software engineering</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-software-engineering-matters-in-the-age-of-ai-assisted-coding">Why software engineering matters in the age of AI-assisted coding</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agile-development-processes">Agile development processes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#designing-software-through-user-stories">Designing software through user stories</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#refactoring-code">Refactoring code</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-driven-development">Test-driven development</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clean-coding">Clean coding</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#readability">Readability</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#naming-things-well">Naming things well</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#consistency">Consistency</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#understandability">Understandability</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#specificity">Specificity</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#brevity">Brevity</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#pronounceability">Pronounceability</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#austerity">Austerity</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-empty-space-properly">Using empty space properly</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#commenting-code">Commenting code</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#what-not-to-comment">What not to comment</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#ugly-or-indecipherable-code">Ugly or indecipherable code</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#the-obvious">The obvious</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#historical-information">Historical information</a></li>
</ul>
</li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#what-to-comment">What to comment</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#intention-aka-director-s-commentary">Intention (aka “Director’s Commentary”)</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#known-flaws-or-todo-items">Known flaws or TODO items</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#comments-on-constant-values">Comments on constant values</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#avoiding-code-smells-and-anti-patterns">Avoiding “code smells” and “anti-patterns”</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#duplicated-code">Duplicated code</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#magic-numbers">Magic numbers</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#long-parameter-lists">Long parameter lists</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wild-card-imports">Wild-card imports</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="principles-of-software-engineering">
<h1>Principles of software engineering<a class="headerlink" href="#principles-of-software-engineering" title="Permalink to this heading">#</a></h1>
<p>Just as mechanical engineering is the science of building physical things like airports or engines, software engineering is the science of building software.  Its goal is to identify the principles and practices that allow building of software that is robust, efficient, and maintainable.  Just as a person can build a table at home without any formal knowledge of mechanical engineering, one can build software without knowing any of the principles of software engineering. However, this software is likely to suffer from exactly the same kinds of instability and poor functionality as the average homemade table.  Knowing a few basic ideas from software engineering can help scientists build software more effectively and generate outputs that will be more robust and maintainable over time.</p>
<p>We have already talked about some of the basic tools of software engineering, such as version control. In this chapter we will focus on some of the “big ideas” from software engineering, highlighting how their adoption can improve the life of nearly anyone who develops software.</p>
<section id="why-software-engineering-matters-in-the-age-of-ai-assisted-coding">
<h2>Why software engineering matters in the age of AI-assisted coding<a class="headerlink" href="#why-software-engineering-matters-in-the-age-of-ai-assisted-coding" title="Permalink to this heading">#</a></h2>
<p>One might ask why we are spending an entire chapter talking about software engineering; when it’s likely that AI tools going to write much of the code in our projects going forward.  First, think back to the point we made in Chapter 1: Programming is not equivalent to writing code.  Even if the AI system can write computer code (e.g. in Python), a human needs to describe the problem(s) that the software is meant to solve, and to iterate with the code to debug any failures to solve the problem.  This requires that a human write the specification that tells the computer how to solve the problem: we may have traded Python for English as the programming language of choice, but nonetheless the human needs to precisely specify the goals of the software.  Thus, an understanding of the software development process will remain essential even as AI assistants write an increasing amount of code.</p>
<p>Software development processes may be less important for small one-off projects written by a single developer, but they become essential once a project becomes large and involves multiple developers.  Coordination costs can quickly eat into the added benefit of more developers on a project, particularly if there is not a strong development process in place.  And writing good, clean code is essential to help bring new developers into a project; otherwise, the startup costs for a developer to get their head around a poorly engineering codebase can just be too large.  Similarly, poorly written code can result in a high “bus factor” (i.e., what happens if your lead developer gets hit by a bus?), which can be major risk for groups that rely heavily upon a particular software project for their work.</p>
</section>
<section id="agile-development-processes">
<h2>Agile development processes<a class="headerlink" href="#agile-development-processes" title="Permalink to this heading">#</a></h2>
<p>When I was in graduate school, I spent countless hours developing a tool for analyzing data that was general enough to process not just the data that I needed to analyze for his project, but also nearly any other kind of data that one might envision from similar experiments.  How many of those other kinds of data did I ever actually analyze?  You guessed it: Zilch.  There is an admirable tendency amongst some scientists to want to solve a problem in a maximally general way, but this problem is not limited to scientists. In fact, it has a name within software circles: “gold plating”.  Unfortunately, humans are generally bad at predicting what is actually needed to solve a problem, and the extra work spent adding gold plating might be fun for the developer but rarely pays off in the longer term.  Software engineers love acronyms, and a commonly used acronym that targets this kind of overengineering is YAGNI: “You Aren’t Gonna Need It”.</p>
<p>Within commercial software engineering, it was once common to develop a detailed requirements document before one ever started writing code, and then move on to code writing using those fixed requirements.  This is known as the “waterfall” method for project management; it can work well in some domains (like physical construction, where the plans can’t change halfway through building, and the materials need to be on hand before construction starts), but in software development it often led to long delays that occurred once the initial plan ran into challenges at the coding phase.  Instead, most software development projects now use methods generally referred to as <em>Agile</em>, in which there are much faster cycles between planning and development. One of the most important <a class="reference external" href="https://agilemanifesto.org/principles.html">principles</a> of the Agile movement is that “Working software is the primary measure of progress.”.  It’s worth noting that a lot of dogma has grown up around Agile and related software development methodologies (such as <em>Scrum</em> and <em>Kanban</em>), most of which is overkill for scientists producing code for research.  But there are nonetheless some very useful concepts and processes that we can take from these methodologies to help us build scientific software better and faster.</p>
<p>In our laboratory, we focus heavily on the idea of the “minimum viable product” (MVP) that grows out of the Agile philosophy.  We shoot for code that solves the scientific or technical problem at hand: no more, and no less.  We try to write that code as cleanly as possible (as described in the next section), but we realize that the code will never be perfect, and that’s ok.  If it’s code that will be reused in the future, then we will likely spend some additional time refactoring it to improve its clarity and robustness and providing additional documentation.  This philosophy is the rationale for the “test-driven development” approach that we outline later in this chapter.</p>
</section>
<section id="designing-software-through-user-stories">
<h2>Designing software through user stories<a class="headerlink" href="#designing-software-through-user-stories" title="Permalink to this heading">#</a></h2>
<p>It’s important to think through the ways that a piece of software will be used, and one useful way to address this is through <em>user stories</em>.  Understanding specific use cases for the software from the standpoint of users can be very useful in helping to ensure that the software is actually solving real problems, rather than solving problems that might theoretically exist but that no user will ever engage with.  We often see this with the development of visualization tools, where the developer thinks that a visualization feature would be “cool” but it doesn’t actually solve a real scientific problem for a user of the software.</p>
<p>A user story is often framed in the following way: “As a [type of user], I want [a particular functionality] so that [what problem the functionality will solve]”.
As an example, say that a researcher wanted to develop a tool to convert between different genomic data formats. A couple of potential user stories for this software could be:</p>
<ul class="simple">
<li><p>“As a user of the ABC123 sequencer, I want to convert my raw data to the current version of the SuperMegaFormat, so that I can submit my data to the OmniData Repository.”</p></li>
<li><p>“As a user of software that that requires my data to be in a specific version of the SuperMegaFormat, I want to validate that my data have been properly converted to comply with that version of the format so that I can ensure that my data can be analyzed.”</p></li>
</ul>
<p>These two stories already point to several functions that need to be implemented:</p>
<ul class="simple">
<li><p>The code needs to be able to access specific versions of the SuperMegaFormat, including the current version and older versions.</p></li>
<li><p>The code needs to be able to read data from the ABC123 sequencer.</p></li>
<li><p>The code needs to be able to validate that a dataset meets any particular version of the SuperMegaFormat.</p></li>
</ul>
<p>User stories are also useful for thinking through the potential impact of new features that are envisioned by the coder.  Perhaps the most common example of violations of YAGNI comes about in the development of visualization tools.  In this example, the developer might decide to create an visualizer to show how the original dataset is being converted into the new format, with interactive features that would allow the user to view features of individual files.  The question that you should always ask yourself is: What user stories would this feature address?  If it’s difficult to come up with stories that make clear how the feature would help solve particular problems for users, then the feature is probably not needed. “If you build it, they will come” might work in baseball, but it rarely works in scientific software. This is the reason that one of us (RP) regularly tells his trainees to post a note in their workspace with one simple mantra: “MVP”.</p>
</section>
<section id="refactoring-code">
<h2>Refactoring code<a class="headerlink" href="#refactoring-code" title="Permalink to this heading">#</a></h2>
<p>Throughout our discussion we will regularly mention the concept of <em>refactoring</em> (as we just did in the previous section), so we should introduce it here.  When we refactor a piece of code, we modify it in a way that doesn’t change its external behavior. The idea long existed in software development but was made prominent by Martin Fowler in his book <em>Refactoring: Improving the Design of Existing Code</em>.  As the title suggests, the goal of refactoring is to improve existing code rather than adding features or fixing bugs - but why would we spend time modifying code once it’s working, unless our goal is to add something new or fix something that is broken?</p>
<p>In fact, the idea of refactoring is closely aligned with the Agile development philosophy mentioned above.  Rather than designing a software product in detail before coding, we can instead design as we go, understanding that this is just a first pass.  As Fowler says:</p>
<blockquote>
<div><p>“With refactoring, we can take a bad, even chaotic, design and rework it into well-structured code. Each step is simple — even simplistic. I move a field from one class to another, pull some code out of a method to make it into its own method, or push some code up or down a hierarchy. Yet the cumulative effect of these small changes can radically improve the design.” - Fowler (p. xiv)</p>
</div></blockquote>
<p>There are several reasons why we might want to refactor existing code.  Most importantly, we may want to make the code <em>easier to maintain</em>.  This in turn often implies making it easier to read and understand, as we discuss further below in the context of <em>clean coding</em>.  For example, we might want to break a large function out into several smaller functions so that the logical structure of the code is clearer from the code itself. Making code easier to understand and maintain also helps make it easier to add features to in the future. There are many other ways in which one can improve code, which are the focus of Fowler’s book; we will outline more of them below when we turn later to the problem of “code smells”.</p>
<p>It is increasingly possible to use AI tools to refactor code. As long as one has a solid testing program in place, this can help save time and also help learn how to refactor code more effectively. This suggests that testing needs to be a central part of our coding process, which is why we will devote an entire chapter to it later in the book.</p>
</section>
<section id="test-driven-development">
<h2>Test-driven development<a class="headerlink" href="#test-driven-development" title="Permalink to this heading">#</a></h2>
<p>Let’s say that you have a software project you want to undertake, and you have in mind what the Minimum Viable Product would be: A script that takes in a dataset and transforms the data into a standardized format that can be uploaded to a particular data repository.  How would you get started?  And how would you know when you are done?</p>
<p>After decomposing the problem into its components, many coders would simply start writing code to implement each of the components.  For example, one might start by creating a script with comments that describe each of the needed components:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 1: index the data files</span>

<span class="c1"># Step 2: load the files</span>

<span class="c1"># Step 3: reformat the metadata to match the repository standard</span>

<span class="c1"># Step 4: combine the data and metadata</span>

<span class="c1"># Step 5: save the data to the required format</span>
</pre></div>
</div>
<p>A sensible way to get started would be march through the steps and write a function to accomplish each one, and then test the entire package once all of the functions are created.  However, this approach has a couple of drawbacks.  First, since you can’t run the application until all of the code is written, you can’t know whether each component is working properly until the entire package is built.  Second, it’s easy to end up writing code that will end up not needing, since you haven’t specified exactly what the inputs and outputs are for each component.  Finally, once you start integrating all of the components, you won’t have a way to know if you have introduced a bug.</p>
<p>One answer to these problems is to start the process by creating a set of <em>tests</em>, which tell us whether the code has solved our intended problems.  The process of writing tests before writing code to solve the problem is known as <em>test-driven development</em> (TDD), and we think that it is a very useful framework to use when writing scientific code, especially if one plans to use LLMs for code generation.  Test-driven development is somewhat controversial within the software engineering field, in part because many people take it too far and become obsessive with testing, such that the tests come to be the tail that wags the dog; in particular we would caution against using the amount of test coverage as a metric for success. But we think that when it is used in a thoughtful way, TDD can be a powerful way to increase the effectiveness and accuracy of one’s code.</p>
<p>We will dive deeply into testing in a later chapter; here we will simply outline a simple test-driven development workflow for the data transformation problem described above.  The TDD workflow can be summarized in a cycle involving three steps:</p>
<ul class="simple">
<li><p><em>Red</em>: Create a test that initially fails for the intended function.</p></li>
<li><p><em>Green</em>: Create a function that passes the test.</p></li>
<li><p><em>Refactor</em>: Modify the code to make it more maintainable, readable, and robust</p></li>
</ul>
<p>These processes are then repeated until the software solves the intended problem. This process helps prevent the developer from writing code to solve problems that don’t exist yet, since the only aim is to create code that passes the specific test in question.</p>
</section>
<section id="clean-coding">
<h2>Clean coding<a class="headerlink" href="#clean-coding" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>“Any fool can write code that a computer can understand. Good programmers write code that humans can understand.”  Fowler (p. 10)</p>
</div></blockquote>
<p>Another idea that has emerged from the Agile community is <em>clean coding</em>, which is the idea that code should be simple, readable, and easily maintainable.  This idea was codified in the book titled <em>Clean Code: A Handbook of Agile Software Craftsmanship</em>, published in 2008 by Robert C. Martin (known in the community as “Uncle Bob”). One of the best ways to describe clean code is that it is <em>simple</em>.  Kent Beck, another Agile founder who developed the idea of “Extreme Programming”, laid out a set of rules for simple code:</p>
<ol class="arabic simple">
<li><p>The code has tests and all of the tests run.</p></li>
<li><p>The code contains no duplication.</p></li>
<li><p>The code makes the design of the system clear</p></li>
<li><p>The code minimizes the number of entities (such as functions or classes).</p></li>
</ol>
<p>Another way to think about clean code is that it makes it as easy as possible for another programmer to come in later and change it.  And it’s essential to remember that this “other programmer” is mostly like to refer to future you!  When we look back at code that we wrote more than a few months ago, we are likely to remember very little of it, meaning that we need to rediscover the design and structure of the code.</p>
<p>There are many different interpretations of the concept of clean code. Here we will lay out the principles that we think are most important for the creation of code in the context of scientific research (as opposed to commercial software development).  Fortunately, the code generated by AI coding assistants is often quite clean, as we found in our analyses of code generated by GPT-4 <span id="id1">[<a class="reference internal" href="bibliography.html#id17" title="Russell A Poldrack, Thomas Lu, and Gašper Beguš. Ai-assisted coding: experiments with gpt-4. 2023. URL: https://arxiv.org/abs/2304.13187, arXiv:2304.13187.">Poldrack <em>et al.</em>, 2023</a>]</span>.  But as we work alongside these assistants, it’s important to develop a mindset of continuous improvement, always seeking to make the code cleaner and simpler whenever we can.</p>
<section id="readability">
<h3>Readability<a class="headerlink" href="#readability" title="Permalink to this heading">#</a></h3>
<p>An excellent test for whether code is clean is whether it is <em>readable</em>.  In fact, one of the 19 guiding principles of the Python language, enshrined in <a class="reference external" href="https://peps.python.org/pep-0020/">The Zen of Python</a>, is “Readability counts”, reflecting the judgment by Python founder Guido van Rossum that <a class="reference external" href="https://peps.python.org/pep-0008/">“code is read much more often than it is written”</a>.</p>
<section id="naming-things-well">
<h4>Naming things well<a class="headerlink" href="#naming-things-well" title="Permalink to this heading">#</a></h4>
<p>The book <a class="reference external" href="https://leanpub.com/naming-things">“Naming Things”</a> by Tom Benner is subtitled “The Hardest Problem in Software Engineering”, which might sound hyperbolic but really can turn out to be true once you start trying to come up with good names as you program. Benner provides a summary on his blog of what he calls <a class="reference external" href="https://www.namingthings.co/naming-things-principles">“The 7 principles of naming”</a>, a subset of which we detail here. However, we highly recommend the book for much more detail on how to follow each of the principles.  It’s particularly important to point out that these different principles may sometimes clash with one another, requiring the judgment of the developer to determine the best name to use.</p>
<section id="consistency">
<h5>Consistency<a class="headerlink" href="#consistency" title="Permalink to this heading">#</a></h5>
<blockquote>
<div><p>“Each concept should be represented by a single, unique name.”</p>
</div></blockquote>
<p>The use of different names for the same concept can lead the reader to assume that there are two different concepts at play, often known as a “<a class="reference external" href="https://en.wikipedia.org/wiki/Jingle-jangle_fallacies">jangle fallacy</a>”.  This might occur when a similar concept appears across multiple functions, but is named differently; for example, a variable referring to a specific model is called <code class="docutils literal notranslate"><span class="pre">modelname</span></code> in one function and <code class="docutils literal notranslate"><span class="pre">llm_label</span></code> in another.</p>
<p>Conversely, using the same name to represent two different concepts can lead the reader to think that they are referring to the same thing, which is called a “jingle fallacy.” For example, if one were to use the variable name <code class="docutils literal notranslate"><span class="pre">model</span></code> to refer to a model class within one function but to a string containing the model name in another function.  This fallacy is particularly likely to occur when one uses names that are too simple (see below).</p>
</section>
<section id="understandability">
<h5>Understandability<a class="headerlink" href="#understandability" title="Permalink to this heading">#</a></h5>
<blockquote>
<div><p>“A name should describe the concept it represents.”</p>
</div></blockquote>
<p>The reader should be able to accurately infer from the name what is being represented.  This implies the common proscription against single-letter variable names, except in cases where the context makes very clear what its function is (e.g. as a counter in a compact loop).  More generally, when creating a variable name it’s worth thinking about what kind of confusion might occur, and also who the intended audiences are. For example, it can be particularly useful to select terms that are common within the relevant scientific domain when available.  Other important guidelines for understandability are using the right pluralization (e.g. a variable with a pluralized name should contain more than one thing, and vice versa for variables with a single name) and the right part of speech (for example, functions should generally use verbs while variables and classes should generally use nouns).</p>
</section>
<section id="specificity">
<h5>Specificity<a class="headerlink" href="#specificity" title="Permalink to this heading">#</a></h5>
<blockquote>
<div><p>“A name shouldn’t be overly vague or overly specific.”</p>
</div></blockquote>
<p>One should avoid very generic names such as “object” or “request”.  In addition, the name of a function should highlight its intended use, rather than details about the implementation.  For example, say that we develop a function that uses a fast Fourier transform to perform bandpass filtering a timeseries.  A name like <code class="docutils literal notranslate"><span class="pre">filter_timeseries_bandpass</span></code> focuses on the intended use, whereas a name like <code class="docutils literal notranslate"><span class="pre">fft_timeseries</span></code> would highlight the implementation details without specifying what the function is meant to do.</p>
</section>
<section id="brevity">
<h5>Brevity<a class="headerlink" href="#brevity" title="Permalink to this heading">#</a></h5>
<blockquote>
<div><p>“A name should be neither overly short nor overly long.”</p>
</div></blockquote>
<p>Most coders tend to err on the side of variables names that are too short, with single-letter names being epitome of this.  One useful concept from Martin’s <em>Clean Code</em> is that the length of a variable name should be related to the scope of the variable.  When a single-letter variable name is used in the context of a very compact loop, its meaning will be immediately obvious.  However, as a variable is used across a broader scope, using a more detailed name will allow the reader to understand the variable without having to look back at where it was previously used to understand its meaning. We would generally suggest to err on the side of using names that are too long versus too short, since the cost to typing longer names is reduced by the autocompletion features present in modern IDEs.</p>
</section>
<section id="pronounceability">
<h5>Pronounceability<a class="headerlink" href="#pronounceability" title="Permalink to this heading">#</a></h5>
<blockquote>
<div><p>“A name should be easy to use in common speech.”</p>
</div></blockquote>
<p>Pronounceability is primarily important for cognitive reasons: We are much more likely to remember things that are meaningful to us compared to things that don’t have obvious meaning.  In addition, an unpronounceable name makes communicating about the object with others (e.g. in a code review) very difficult.  So while <code class="docutils literal notranslate"><span class="pre">bfufftots</span></code> might seem like a clever acronym for “bandpass filter using FFT on time series”, <code class="docutils literal notranslate"><span class="pre">filter_timeseries_bandpass</span></code> is probably more effective and will certainly be clearer to readers.</p>
</section>
<section id="austerity">
<h5>Austerity<a class="headerlink" href="#austerity" title="Permalink to this heading">#</a></h5>
<blockquote>
<div><p>“A name should not be clever or rely on temporary concepts.”</p>
</div></blockquote>
<p>Programmers often like to use humorous or clever object names.  For example, a function that marks a directory for later deletion might be called <code class="docutils literal notranslate"><span class="pre">terminator()</span></code> (riffing on Schwarzenegger’s “I’ll be back”.)  As clever as this might seem, it’s not useful for anyone who doesn’t have the same cultural context.  Object names should be boring and matter-of-fact to ensure that they are as widely understandable as possible.</p>
</section>
</section>
<section id="using-empty-space-properly">
<h4>Using empty space properly<a class="headerlink" href="#using-empty-space-properly" title="Permalink to this heading">#</a></h4>
<p>Another important aspect of readability is the judicious use of empty space.  While users of other languages sometimes revolt at the fact that empty space plays a syntactic role in Python, we actually view this is a very useful feature of the language, because it enhances the readability of code.  For example, the following code is perfectly legitimate in R, but inferring its structure from a quick glance is difficult:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">trans_levels</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">();</span><span class="w"> </span><span class="nf">for </span><span class="p">(</span><span class="n">gene</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">genes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="n">snps</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">get_snps</span><span class="p">(</span><span class="n">gene</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="n">.</span><span class="m">001</span><span class="p">)</span>
<span class="w">  </span><span class="n">trans_levels</span><span class="p">[[</span><span class="n">gene</span><span class="p">]]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span>
<span class="nf">get_transcript_level</span><span class="p">(</span><span class="n">gene</span><span class="p">,</span><span class="w"> </span><span class="n">snps</span><span class="p">)};</span><span class="w"> </span><span class="n">phenotype</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">get_phen</span><span class="p">(</span><span class="n">gene</span><span class="p">,</span><span class="w"> </span><span class="n">trans_levels</span><span class="p">[[</span><span class="n">gene</span><span class="p">]])</span>
</pre></div>
</div>
<p>On the other hand, the syntactic role of horizontal empty space in Python enforces much clearer visual structure:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">trans_levels</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">gene</span> <span class="ow">in</span> <span class="n">genes</span><span class="p">:</span>
    <span class="n">snps</span> <span class="o">=</span> <span class="n">get_snps</span><span class="p">(</span><span class="n">gene</span><span class="p">,</span> <span class="mf">.001</span><span class="p">)</span>
    <span class="n">trans_levels</span><span class="p">[</span><span class="n">gene</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_transcript_level</span><span class="p">(</span><span class="n">gene</span><span class="p">,</span> <span class="n">snps</span><span class="p">)</span>
<span class="n">phenotype</span> <span class="o">&lt;-</span> <span class="n">get_phen</span><span class="p">(</span><span class="n">gene</span><span class="p">,</span> <span class="n">trans_levels</span><span class="p">[</span><span class="n">gene</span><span class="p">])</span>
</pre></div>
</div>
<p>It is also important to use vertical empty space to separate conceptually distinct sections of code.  In this case, this helps make more visually apparent the fact that there is likely an error in the code, with the <code class="docutils literal notranslate"><span class="pre">gene</span></code> variable that indexes the loop being used outside of the loop.</p>
<p>Vertical empty space also plays a role in readability, by helping to distinguish conceptually or logically related section of code. At the same time, it’s important to not overuse vertical white space; our ability to understand code that we can see at once is much better than understanding code that spreads across multiple screen pages (which requires holding information in working memory), so it’s important to use vertical empty space judiciously.</p>
</section>
<section id="commenting-code">
<h4>Commenting code<a class="headerlink" href="#commenting-code" title="Permalink to this heading">#</a></h4>
<p>There are few topics where the common understanding differs so much from expert consensus as in the use of comments within code.  For many programmers, the term “documentation” is largely synonymous with code comments, and it is common to hear novice programmers complaining about the need to add comments to their code before releasing it.  On the other hand, one of the most consistent messages from the software engineering literature is that comments are far too often used as a “magic balm” over bad code:</p>
<ul class="simple">
<li><p>“Don’t comment bad code — rewrite it” (Kernighan &amp; Plaugher)</p></li>
<li><p>“Clear and expressive code with few comments is far superior to cluttered and complex code with lots of comments””” (Robert Martin, Clean Code)</p></li>
<li><p>“comments aren’t a bad smell; indeed they are a sweet smell. The reason we mention comments here is that comments are often used as a deodorant. It’s surprising how often you look at thickly commented code and notice that the comments are there because the code is bad.” (Fowler, Refactoring)</p></li>
</ul>
<p>The overall goal of code comments should be to help the reader know as much as the writer knows about the code.  We will start by outlining the kinds of things that do <em>not</em> warrant comments, and then turn to the legitimate uses of comments.</p>
<section id="what-not-to-comment">
<h5>What not to comment<a class="headerlink" href="#what-not-to-comment" title="Permalink to this heading">#</a></h5>
<section id="ugly-or-indecipherable-code">
<h6>Ugly or indecipherable code<a class="headerlink" href="#ugly-or-indecipherable-code" title="Permalink to this heading">#</a></h6>
<p>Rather that adding comments, one should instead refactor so that the code is understandable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># function to create a random normal variate</span>
<span class="c1"># takes mean and SD as arguments</span>
<span class="k">def</span> <span class="nf">crv</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">u</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">*</span> \
        <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">u</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">z</span>
</pre></div>
</div>
<p>• instead, use understandable names:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">random_normal_variate</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stddev</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">unif</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>
    <span class="n">box_mueller_z0</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">unif</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">*</span> \
        <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">unif</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">mean</span> <span class="o">+</span> <span class="n">stddev</span> <span class="o">*</span> <span class="n">box_mueller_z0</span>
</pre></div>
</div>
<p>In this case, we don’t need a comment to explain the function because its name and the names of its arguments make clear what its function is and how to use it.  By using the variable name <code class="docutils literal notranslate"><span class="pre">box_mueller_z0</span></code> we also make clear what algorithm this computation reflects (the Box-Mueller transform).</p>
</section>
<section id="the-obvious">
<h6>The obvious<a class="headerlink" href="#the-obvious" title="Permalink to this heading">#</a></h6>
<p>Anything that is clear from the structure of the code or the names of the variables doesn’t need to be commented.  Here are some examples of unnecessary comments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># looping over states</span>
<span class="k">for</span> <span class="n">state_index</span><span class="p">,</span> <span class="n">state</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">states</span><span class="p">):</span>
    <span class="o">...</span>

<span class="c1"># function to create a random normal variate</span>
<span class="k">def</span> <span class="nf">create_random_normal_variate</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">sd</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>In general one should assume that the reader of code has a good understanding of the language, such that they could understand that first example involves a loop over states.  An exception to this rule is when one is writing code for educational purposes; in that case, one might want to include comments that are more didactic even though they would cause clutter for an experienced programmer.</p>
</section>
<section id="historical-information">
<h6>Historical information<a class="headerlink" href="#historical-information" title="Permalink to this heading">#</a></h6>
<p>Rather than including historical notes about the code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># RP changed on 2/22/2025 to include sd argument</span>
<span class="k">def</span> <span class="nf">random_normal_variate</span><span class="p">(</span><span class="n">mean</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stddev</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>One should instead use a version control to track changes.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="s2">&quot;feature: added std dev argument to random_normal_variate&quot;</span>
</pre></div>
</div>
<p>It’s then possible to see who is responsible for each line in a particular source file using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span></code> function:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>git<span class="w"> </span>blame<span class="w"> </span>random_numbers.py
^e14a07d<span class="w"> </span><span class="o">(</span>Russell<span class="w"> </span>Poldrack<span class="w"> </span><span class="m">2025</span>-02-22<span class="w"> </span><span class="m">07</span>:54:37<span class="w"> </span>-0800<span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>import<span class="w"> </span>random
^e14a07d<span class="w"> </span><span class="o">(</span>Russell<span class="w"> </span>Poldrack<span class="w"> </span><span class="m">2025</span>-02-22<span class="w"> </span><span class="m">07</span>:54:37<span class="w"> </span>-0800<span class="w"> </span><span class="m">2</span><span class="o">)</span><span class="w"> </span>import<span class="w"> </span>math
^e14a07d<span class="w"> </span><span class="o">(</span>Russell<span class="w"> </span>Poldrack<span class="w"> </span><span class="m">2025</span>-02-22<span class="w"> </span><span class="m">07</span>:54:37<span class="w"> </span>-0800<span class="w"> </span><span class="m">3</span><span class="o">)</span>
73cee79c<span class="w"> </span><span class="o">(</span>Russell<span class="w"> </span>Poldrack<span class="w"> </span><span class="m">2025</span>-02-22<span class="w"> </span><span class="m">07</span>:55:19<span class="w"> </span>-0800<span class="w"> </span><span class="m">4</span><span class="o">)</span><span class="w"> </span>def<span class="w"> </span>random_normal_variate<span class="o">(</span><span class="nv">mean</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">stddev</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>:
^e14a07d<span class="w"> </span><span class="o">(</span>Russell<span class="w"> </span>Poldrack<span class="w"> </span><span class="m">2025</span>-02-22<span class="w"> </span><span class="m">07</span>:54:37<span class="w"> </span>-0800<span class="w"> </span><span class="m">5</span><span class="o">)</span><span class="w">     </span><span class="nv">unif</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>random.random<span class="o">()</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span>range<span class="o">(</span><span class="m">2</span><span class="o">)]</span>
^e14a07d<span class="w"> </span><span class="o">(</span>Russell<span class="w"> </span>Poldrack<span class="w"> </span><span class="m">2025</span>-02-22<span class="w"> </span><span class="m">07</span>:54:37<span class="w"> </span>-0800<span class="w"> </span><span class="m">6</span><span class="o">)</span><span class="w">     </span><span class="nv">box_mueller_z0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>math.sqrt<span class="o">(</span>-2<span class="w"> </span>*<span class="w"> </span>math.log<span class="o">(</span>unif<span class="o">[</span><span class="m">0</span><span class="o">]))</span><span class="w"> </span>*<span class="w"> </span><span class="se">\</span>
^e14a07d<span class="w"> </span><span class="o">(</span>Russell<span class="w"> </span>Poldrack<span class="w"> </span><span class="m">2025</span>-02-22<span class="w"> </span><span class="m">07</span>:54:37<span class="w"> </span>-0800<span class="w"> </span><span class="m">7</span><span class="o">)</span><span class="w">         </span>math.cos<span class="o">(</span><span class="m">2</span><span class="w"> </span>*<span class="w"> </span>math.pi<span class="w"> </span>*<span class="w"> </span>unif<span class="o">[</span><span class="m">1</span><span class="o">])</span>
73cee79c<span class="w"> </span><span class="o">(</span>Russell<span class="w"> </span>Poldrack<span class="w"> </span><span class="m">2025</span>-02-22<span class="w"> </span><span class="m">07</span>:55:19<span class="w"> </span>-0800<span class="w"> </span><span class="m">8</span><span class="o">)</span><span class="w">     </span><span class="k">return</span><span class="w"> </span>mean<span class="w"> </span>+<span class="w">  </span>stddev<span class="w"> </span>*<span class="w"> </span>box_mueller_z0
</pre></div>
</div>
</section>
</section>
<section id="what-to-comment">
<h5>What to comment<a class="headerlink" href="#what-to-comment" title="Permalink to this heading">#</a></h5>
<section id="intention-aka-director-s-commentary">
<h6>Intention (aka “Director’s Commentary”)<a class="headerlink" href="#intention-aka-director-s-commentary" title="Permalink to this heading">#</a></h6>
<p>Comments should help the reader understand important design choices that would not be evident from simply reading the code.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># using a numpy array here rather than</span>
<span class="c1"># a pandas DataFrame for performance reasons</span>
</pre></div>
</div>
<p><strong>TODO</strong>: More examples here</p>
</section>
<section id="known-flaws-or-todo-items">
<h6>Known flaws or TODO items<a class="headerlink" href="#known-flaws-or-todo-items" title="Permalink to this heading">#</a></h6>
<p>It’s often the case that there are remaining known issues with code that the developer has not yet had the time to address.  These should be noted with a consistent heading (e.g. “TODO”) so that they can be easily searched for.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO: Current algorithm is very inefficient</span>
<span class="c1"># - should parallelize to improve performance</span>
</pre></div>
</div>
</section>
<section id="comments-on-constant-values">
<h6>Comments on constant values<a class="headerlink" href="#comments-on-constant-values" title="Permalink to this heading">#</a></h6>
<p>When including constant values, it can be useful to describe the motivation for the specific value chosen.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using 500 bootstrap replicates based on recommendation </span>
<span class="c1"># from Efron &amp; Tibshirani 1993</span>
<span class="n">n_replicates</span> <span class="o">=</span> <span class="mi">500</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<section id="avoiding-code-smells-and-anti-patterns">
<h3>Avoiding “code smells” and “anti-patterns”<a class="headerlink" href="#avoiding-code-smells-and-anti-patterns" title="Permalink to this heading">#</a></h3>
<p>There are two related concepts that are used to describe the appearance of potentially problematic code  The “anti-pattern” is a riff on the concept of a <em>design pattern</em>, which is a recommended solution (i.e. a “best practice”) for a common programming problem <span id="id2">[<a class="reference internal" href="bibliography.html#id4" title="Erich Gamma. Design patterns: elements of reusable object-oriented software. Addison-Wesley, Reading, Mass., 1995. ISBN 0201633612 (acid-free paper).">Gamma, 1995</a>]</span>.  An anti-pattern is conversely a commonly used but bad solution (i.e. a “worst practice”) for a common programming problem. In the Python world these are well known from the <a class="reference external" href="https://docs.quantifiedcode.com/python-anti-patterns/">The Little Book of Python Anti-Patterns</a>, which lays out many different anti-patterns common in Python coding.  The second idea, that of the “code smell”, has been popularized by Martin Fowler in his well-known book <em>Refactoring: Improving The Design of Existing Code</em><span id="id3">[<a class="reference internal" href="bibliography.html#id15" title="Martin Fowler and Kent Beck. Refactoring: improving the design of existing code. Addison-Wesley, Reading, MA, 1999. ISBN 0201485672.">Fowler and Beck, 1999</a>]</span>. Just as a bad smell from food can give us an intuitive sense that the good might be spoiled, code smells are intuitive reactions to code that suggest that there might be a problem that could be a target for refactoring.</p>
<p>Here we outline several bad smells and anti-patterns commonly found in our experience with scientific code.</p>
<section id="duplicated-code">
<h4>Duplicated code<a class="headerlink" href="#duplicated-code" title="Permalink to this heading">#</a></h4>
<p>One of the most common smells in scientific code is the use of repeated blocks of duplicated code with only minor changes.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compute mean response time separately for each test (bad practice)</span>
<span class="n">mean_rt_1</span> <span class="o">=</span> <span class="n">stroop_data</span><span class="p">[</span><span class="s1">&#39;ResponseTime&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">mean_rt_2</span> <span class="o">=</span> <span class="n">flanker_data</span><span class="p">[</span><span class="s1">&#39;RT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">mean_rt_3</span> <span class="o">=</span> <span class="n">nback_data</span><span class="p">[</span><span class="s1">&#39;RespTime&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">grand_mean_rt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">([</span><span class="n">mean_rt_1</span><span class="p">,</span> <span class="n">mean_rt_2</span><span class="p">,</span> <span class="n">mean_rt_3</span><span class="p">])</span>
</pre></div>
</div>
<p>This code might work, but it violates the commonly stated principle of “Don’t Repeat Yourself” (DRY), and is problematic for several reasons.  First, any changes to the intended operation (in this case computing the mean of the ‘ResponseTime’ variable in the data frame) would require making changes on multiple lines. In this example the lines are close to one another so it would be easy to see that they all need to be changed, but if they were separated by many other others then one would need to be sure to make the change in each place.  Second, imagine that we wanted to include an additional task in the dataset; we would need to add a new line to compute the mean for the added condition, and also would need to remember to add it to the computation of the grand mean.  Third, an especially strong code smell is the use of numbers as part of variable names, rather than using a data structure such as a dictionary or data frame that inherently represents the data within a single iterable object.  Let’s say that we decided to remove the flanker task from our dataset; we would then need to remember to remove <code class="docutils literal notranslate"><span class="pre">mean_rt_2</span></code> from the grand mean computation, which would require working memory if those two lines were to become separated by other code.</p>
<p>Here is a refactored version of the code that:</p>
<ul class="simple">
<li><p>extracts the task names and associated data frame column names for the response time variable for each into a dictionary</p></li>
<li><p>creates a function that returns the mean of a given column in the data frame.  Its naming as “get_mean_response_time” will help the reader understand that “rt” refers to “response time” in the rest of the code (which is obvious to domain experts but not necessarily to others reading the code).</p></li>
<li><p>loops through the dictionary elements and applies the function to the relevant column, saving them to a dictionary</p></li>
<li><p>computes the grand mean using the values from the dictionary created from each dataset</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">rt_column_names</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;stroop&#39;</span><span class="p">:</span> <span class="s1">&#39;ResponseTime&#39;</span><span class="p">,</span>
        <span class="s1">&#39;flanker&#39;</span><span class="p">:</span> <span class="s1">&#39;RT&#39;</span><span class="p">,</span>
        <span class="s1">&#39;nback&#39;</span><span class="p">:</span> <span class="s1">&#39;RespTime&#39;</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_mean_response_time</span><span class="p">(</span><span class="n">testdata</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">testdata</span><span class="p">[</span><span class="n">column_name</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="n">mean_rt</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">test</span><span class="p">,</span> <span class="n">column_name</span> <span class="ow">in</span> <span class="n">rt_column_names</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">mean_rt</span><span class="p">[</span><span class="n">test</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_mean_response_time</span><span class="p">(</span>
            <span class="n">data</span><span class="p">[</span><span class="n">test</span><span class="p">],</span>
            <span class="n">column_name</span><span class="p">)</span>

    <span class="n">grand_mean_rt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">mean_rt</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
</pre></div>
</div>
<p>This refactoring has more lines of code than the original, but it will be much easier to understand, to maintain, and to modify.  Also note the use of vertical empty space to highlight the distinct logical components of the code.</p>
</section>
<section id="magic-numbers">
<h4>Magic numbers<a class="headerlink" href="#magic-numbers" title="Permalink to this heading">#</a></h4>
<p>A <em>magic number</em> is a number that is included in code directly rather than via assignment to a variable  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">proportion_significant</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span> <span class="o">&gt;</span> <span class="mf">3.09</span><span class="p">)</span>
</pre></div>
</div>
<p>What does “3.09” refer to? A statistically literate reader might infer that this was meant to refer to the 99.9th percentile of the standard normal (Z) distribution, but couldn’t be certain without talking to the developer. Another particular problem with floating point magic numbers is that they often are rounded (i.e. 3.09 rather than 3.090232306167813), which could lead to imprecision in the results in some contexts.   An additional problem with this particular function is that the value can’t be changed by the user of the function.  It would be better compute the value formally based on an explicit input of the probability, and then assign it to a named variable that makes clear what it means:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">proportion_exceeding_threshold</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">p_threshold</span><span class="o">=</span><span class="mf">.001</span><span class="p">):</span>
    <span class="n">z_cutoff</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">p_threshold</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">z_cutoff</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="long-parameter-lists">
<h4>Long parameter lists<a class="headerlink" href="#long-parameter-lists" title="Permalink to this heading">#</a></h4>
<p>A long list of parameters in a function definition can be confusing for users. One way that Python coders sometimes get around specifying long parameter lists is the use of the <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> argument, which allows the specification of arbitrary keyword arguments to a function, placing them within a dictionary.  For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">36</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">37</span><span class="p">]:</span> <span class="n">myfunc</span><span class="p">(</span><span class="n">myarg</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mybool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">{</span><span class="s1">&#39;myarg&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;mybool&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
<p>This can be useful in specific cases, but in general should be avoided if possible, as it makes the code less clear and allows for potential type errors.</p>
<p>A useful solution when one needs to pass a large number of named parameters is to create a <em>configuration object</em> that contains all of these parameters. This can be easily accomplished using <em>dataclasses</em> within Python, which are specialized classes meant to easily store data.  Here is an example of a function call with a number of parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="k">def</span> <span class="nf">run_llm_prompt</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gpt4&#39;</span><span class="p">,</span> <span class="n">random_seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                   <span class="n">temperature</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">max_tokens</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">system_prompt</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_response_length</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="o">...</span>

</pre></div>
</div>
<p>We could instead first create a configuration class that allows us to define all of the optional parameters:</p>
<p><em>TODO</em>: DO WE ACTUALLY WANT TO USE TYPE HINTS THROUGHOUT?  IF SO, WE PROBABLY NEED TO INTRODUCE THEM EARLIER</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">LLMConfig</span><span class="p">:</span>
    <span class="n">model</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;gpt4&#39;</span>
    <span class="n">random_seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.7</span>
    <span class="n">max_tokens</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">256</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">system_prompt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">max_response_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">run_llm_prompt</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
    <span class="o">...</span>

<span class="c1"># we could then use it like this, first setting any optional </span>
<span class="n">config</span> <span class="o">=</span> <span class="n">LLMConfig</span><span class="p">(</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">run_llm_prompt</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="wild-card-imports">
<h4>Wild-card imports<a class="headerlink" href="#wild-card-imports" title="Permalink to this heading">#</a></h4>
<p>This is a Python-specific anti-pattern that is commonly seen in software written by researchers.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">random_sample</span> <span class="o">=</span> <span class="n">vonmises</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example we have no idea where the vonmises() function is being specified.  In fact, both numpy.random and scipy.stats have an object named vonmises,  so function that is called will depend on the order in which the two import functions are run.  It’s much better to explicitly import functions that are used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">stats</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">vonmises</span>

<span class="n">random_sample</span> <span class="o">=</span> <span class="n">vonmises</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">random_sample</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">vonmises</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="essential_tools_and_techniques.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Essential tools and techniques</p>
      </div>
    </a>
    <a class="right-next"
       href="bibliography.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Bibliography</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-software-engineering-matters-in-the-age-of-ai-assisted-coding">Why software engineering matters in the age of AI-assisted coding</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agile-development-processes">Agile development processes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#designing-software-through-user-stories">Designing software through user stories</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#refactoring-code">Refactoring code</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-driven-development">Test-driven development</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clean-coding">Clean coding</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#readability">Readability</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#naming-things-well">Naming things well</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#consistency">Consistency</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#understandability">Understandability</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#specificity">Specificity</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#brevity">Brevity</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#pronounceability">Pronounceability</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#austerity">Austerity</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#using-empty-space-properly">Using empty space properly</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#commenting-code">Commenting code</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#what-not-to-comment">What not to comment</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#ugly-or-indecipherable-code">Ugly or indecipherable code</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#the-obvious">The obvious</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#historical-information">Historical information</a></li>
</ul>
</li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#what-to-comment">What to comment</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#intention-aka-director-s-commentary">Intention (aka “Director’s Commentary”)</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#known-flaws-or-todo-items">Known flaws or TODO items</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#comments-on-constant-values">Comments on constant values</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#avoiding-code-smells-and-anti-patterns">Avoiding “code smells” and “anti-patterns”</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#duplicated-code">Duplicated code</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#magic-numbers">Magic numbers</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#long-parameter-lists">Long parameter lists</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#wild-card-imports">Wild-card imports</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Russell Poldrack et al.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>